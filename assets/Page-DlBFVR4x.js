import{b as d,cr as M,f as R,aC as v,j as s,B as A,R as m,cq as c}from"./index-BR7ZzziA.js";import{u as E,U as o,a as i}from"./UserFormInput-C0OI9Sfu.js";import{l as L,g as p,k as T,i as u,j as x}from"./index-CtFb_B6V.js";import{R as f}from"./index-C_yJVbe9.js";import{A as V,a as B,b as O}from"./AuthFormWrapper-CZyJXTXm.js";import{u as U}from"./usePageTitle-CM8nHFj6.js";import{F as h}from"./index-Bsa8Cgeg.js";import"./index-YvNUdkIZ.js";import"./row-cBrBeGQV.js";import"./index-CaKTH2rl.js";import"./responsiveObserver-CaYNLK9G.js";const Z=()=>{const[t,j]=d.useState(!1),[l,w]=d.useState(!1),{control:a,handleSubmit:b,watch:y,reset:g}=E({mode:"onBlur"}),[P,{isLoading:e}]=M(),n=R(),N=v(),z=()=>j(r=>!r),S=()=>w(r=>!r),k=y("password"),C=async r=>{n(c(!0));try{await P(r).unwrap(),N(m.HOME)}catch(F){console.error("Ошибка авторизации:",F)}finally{n(c(!1))}};return U("Регистрация"),s.jsx(V,{title:"Регистрация",subtitle:"Зарегистрироваться с помощью почты",icon:s.jsx(L,{size:30}),children:s.jsxs(h,{onFinish:b(C),autoComplete:"off",children:[s.jsx(o,{control:a,name:"name",disabled:e,placeholder:"Имя",rules:i.name,prefix:s.jsx(p,{size:20,className:"mr-1"})}),s.jsx(o,{control:a,name:"surname",disabled:e,placeholder:"Фамилия",rules:i.surname,prefix:s.jsx(p,{size:20,className:"mr-1"})}),s.jsx(o,{control:a,name:"email",disabled:e,placeholder:"Email",rules:i.email,prefix:s.jsx(T,{size:20,className:"mr-1"})}),s.jsx(o,{control:a,name:"password",disabled:e,type:t?"text":"password",placeholder:"Пароль",rules:i.password,prefix:s.jsx(f,{size:20,className:"mr-1"}),suffix:s.jsx("span",{onClick:z,className:"flex items-center justify-center cursor-pointer p-0 m-0 h-auto w-auto hover:text-gray-500","aria-label":t?"hidePassword":"showPassword",children:t?s.jsx(u,{size:20}):s.jsx(x,{size:20})})}),s.jsx(o,{control:a,name:"copyPassword",type:l?"text":"password",disabled:e,placeholder:"Повторите пароль",rules:i.copyPassword(k),prefix:s.jsx(f,{size:20,className:"mr-1"}),suffix:s.jsx("span",{onClick:S,className:"flex items-center justify-center cursor-pointer p-0 m-0 h-auto w-auto hover:text-gray-500","aria-label":l?"hidePassword":"showPassword",children:l?s.jsx(u,{size:20}):s.jsx(x,{size:20})})}),s.jsx(B,{disabled:e,loading:e,children:"Зарегистрироваться"}),s.jsxs("div",{className:"flex justify-between mb-0 gap-1",children:[s.jsx(h.Item,{className:"flex items-center justify-end",children:s.jsx(A,{onClick:()=>g(),color:"default",variant:"solid",children:"Очистить форму"})}),s.jsx(O,{text:"Есть аккаунт?",linkText:"Войти",linkTo:m.LOGIN})]})]})})};export{Z as Signup};
